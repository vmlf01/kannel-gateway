2000-01-11    <rpr@rpr.wapit.com>

	* gw/wsp.c|h: capabilities client|server SDU size, method|push MOR
	and protocol options (partially) now supported. Note tested, and I
	think that rest of the system ignores SDU settings, fix that later.

2000-01-10    <rpr@rpr.wapit.com>

	* gw/wsp.*: continued capability work

2000-01-10 Aarno Syvänen <syvanen@wapit.com>

	* wtp_events-decl.h: added user_data to primitive TRAbort (WSP PDU will
	use it).

        * wtp_send.c: Corresponding change to function pack_abort. Module 
	reorganised by adding static functions tell_send_error, insert_pdu_
	type, indicate_simple_message, insert_tid, insert_rid, insert_abort_
	type, insert_ack_type

	* wtp.c: Function wtp_machine_find_or_create reorganised. Now it can 
        handle event RcvAbort, too.  Function wtp_unpack_wdp_datagram 
	reorganised by adding static functions deduce_tid, message_header_
	fixed, deduce_pdu_type, single_message, protocol_version, unpack_ack, 
	unpack_abort, unpack_invoke and tell_about_error.


Mon Jan 10 15:48:17 2000  Lars Wirzenius  <liw@wapit.com>

	* gw/wml.c: Applied patch from Petri Ahonen <peahonen@ahonen.net>
	with fixes to WML encoding.

Mon Jan 10 11:02:33 2000  Lars Wirzenius  <liw@wapit.com>

	* config.h.in, gw/bearerbox.c, gw/smsc_emi.c, gw/smsc_smpp.c,
	gw/wapbox.c, gw/wsp.c, gwlib/thread.c: Silenced compiler warnings
	when compiling with -Wall.

Mon Jan 10 10:10:22 2000  Lars Wirzenius  <liw@wapit.com>

	* Removed automake. Automake makes huge, complicated Makefiles
	that I am rather reluctant to decipher, and I would have had to
	do that to incorporate WMLScript compiler source. So I removed
	the Makefile.am's and made a Makefile.in by hand.

Mon Jan 10 07:36:36 2000  Lars Wirzenius  <liw@wapit.com>

	* gw/wsp.c: Fixed function wsp_http_thread so that is handles
	WBMP images correctly (i.e., sends them to the phone).

2000-01-07    <rpr@rpr.wapit.com>

	* gw/wsp*.c: initial code to handle capabilities. Not finished.

	* gw/wapbox.c: removed double logging (use log-file in
	configuration)

	* gw/bearerbox.c: fixed WAP routing (no more crashes because of
	WAP traffic while connected to SMSC)

Fri Jan  7 18:06:38 2000  Lars Wirzenius  <liw@wapit.com>

	* gw/boxc.c, gwlib/http.c, gw/wapbox.c, gw/wtp.c: Made sure
	variables are initialized (compiled with gcc -Wall -O2, which
	hasn't been done for a while), or removed unused variables.
	
	* gw/wsp_events-decl.h, gw/wsp_state-decl.h: Added response_type
	member to SMethodResultRequest so that the Content-Type header
	can be communicated to the phone.
	
	* gw/wsp.c: Set response_type according to what the HTTP server
	returns as Content-Type. Also, don't blindly assume everything
	is WML.

Fri Jan  7 14:47:09 2000  Lars Wirzenius  <liw@wapit.com>

	* Making release 0.2.

Fri Jan  7 12:01:09 2000  Lars Wirzenius  <liw@wapit.com>

	* AUTHORS, NEWS, README, Release-0.2, VERSION, gw/bearerbox.conf:
	Preparing for release.
	
	* Makefile.am, Makefile.in: Removed stuff from EXTRA_DIST.
	
	* doc/fakewap-packets.txt: Wrote. This explains the packets that
	the upcoming fakewap program will use.

2000-01-05    <rpr@rpr.wapit.com>

	* gw/bearerbox.c: fixed memmove calls (thanks to Yuri for pointing
	them out)

2000-01-04    <rpr@rpr.wapit.com>

	* gw/wapbox.c: removed automatic logfile opening and instead added
	configuration variable log-file and log-level. Also added standard
	command line options identical to smsbox and bearerbox.

	* gw/wml.c: removed duplicate of 'write_variable_value' function
	(original in gwlib/utils.c)

2000-01-03    <rpr@rpr.wapit.com>

	* gw/wapbox.c (send_heartbeat): added heartbeat sending. And
	changed bearerbox port and host information to default values,
	not undefined. Patvched some files to make it work

Thu Dec 30 17:51:28 1999  Patrick Schaaf  <bof@bof.de>

	* gw/boxc.c, gwlib/http.c, gwlib/socket.{c,h}: reverted
	introduction of gw_getnameinfo() in favour of getnameinfo,
	which is now "emulated" properly.

Thu Dec 30 18:47:19 1999  Lars Wirzenius  <liw@wapit.com>

	* gw/wsp.c: WML page is now fetched from the URL specifed in the
	Get PDU and compiled, then sent to phone. Is this a WAP gateway
	yet?

Thu Dec 30 17:55:22 1999  Lars Wirzenius  <liw@wapit.com>

	* Makefile, */Makefile: Removed from CVS, since they're supposed
	to be generated, and not included in the distribution.

1999-12-30    <rpr@rpr.wapit.com>

	* gw/smsbox.smsconf: improved documentation

	* gw/bearerbox.conf: ditto

Thu Dec 30 17:04:40 1999  Lars Wirzenius  <liw@wapit.com>

	* */Makefile, configure: Ran automake and autoconf and configure,
	thus some file re-generated.
	
	* NEWS, AUTHORS: Added empty ones. automake requires them.

Thu Dec 30 16:57:50 1999  Lars Wirzenius  <liw@wapit.com>

	* Applied patch from bof@bof.de for autoconf support. Renamed
	LICENSE to COPYING, and various other similar minor changes.

1999-12-30    <rpr@rpr.wapit.com>

	* gwlib/socket.c: added that missing reuseaddr to
	connect_with_port

	* gw/smsbox_req.c: oops, did not return all working code, now it
	should work as it did earlier

	* gw/smsc_emi.c: some little fixes to udh messages

1999-12-30    <bof@bof.de>

	* more autoconf: compiles on libc5 and libc6 Linux,
	  and Solaris 2.6 with gcc. See README.autoconf

1999-12-29    <bof@bof.de>

	* converted to use automake/autoconf: ./configure && make

Wed Dec 29 22:06:22 1999  Lars Wirzenius  <liw@wapit.com>

	* gw/wsp.c: Three bugs in Reply PDU fixed: status code should
	be encoded (200 is encoded as 0x20); the length of the content
	type field should be included; and the high bit of the octet
	that tells the content type should be set. 
	
	After these modifications, a trivial "Hello, world" WML page is
	now successfully transferred to a 7110 phone. Yesh. Any year
	now we will really have a WAP gateway.

1999-12-29 Aarno Syvänen <syvanen@wapit.com>

	* wtp.c, wtp_send.c: Added label WTP and function names in error 
	messages.

	* wtp_state-decl.h: More rows added. Now all events expect timer and
	error are handled.

	* wtp_send.c: Added abort_type in the argument list of the function 
	send_abort. 

	* wsp_state-decl.h: Added rows for handling Get and Disconnect PDUs 
	when the state is NULL_STATE (these are needed for restarting the 
	wapbox.

1999-12-28    <rpr@rpr.wapit.com>

	* gwlib/log.*: added log level 'forced' and updated documentary in
	header file.

1999-12-28 Aarno Syvänen <syvanen@wapit.com>

	* wtp_send.c: bug fixing in functions send_ack and send_abort

1999-12-22 Aarno Syvänen <syvanen@wapit.com>

	* spaces around assignment operators added

	* wtp.c: function machine_find_or_create rewritten. We should not
	create a new machine when we are not receiving an invoke pdu.

	* wtp.c, wtp_events-decl.h: TRResult has now wsp_tid amongst its 
	attributes

	* wsp_events-decl.h: Superflous events removed

	* wtp_send.c: Internal function wtp_add_datagram_address added, send*
	functions changed respectively. Added functions send_ack and 
	send_abort

        * wtp_machine-decl.h: added attribute tid_ve, which tells are we 
	doing tid verification or normal acknowledgement 

	* wtp_state-decl.h: added rows for handling receiving invoke pdu, when
	state is result_wait

1999-12-22    <rpr@rpr.wapit.com>

	* gw/smsc.c, conf-files: changed SMSC configuration vairable
	username and password into smsc-username and smsc-password with
	future HTTP adminstration in mind.

1999-12-22    <rpr@rpr.wapit.com>
	
	* gw/smsbox_req.c (do_split_send): returned old code until Mikael
	fixes his new one.

1999-12-21    <rpr@rpr.wapit.com>

	* gw/smsbox_req.c: fixed default username printing problem. Still
	waiting for Mikael to fix that split_send, it is not working
	properly right now.

	* gw/bearerbox.c: little modifications to debug output

Tue Dec 21 15:17:32 1999  Lars Wirzenius  <liw@wapit.com>

	* README.docbook: Wrote. Includes instructions for getting Docbook
	working (on Debian and Red Hat; patches for other systems most
	welcome).
	
	* gw/wml.c, gw/wml.h, test/test_wml.c: Added to gateway module
	from old smsgateway module. Code written by Peter Grönholm.
	Implements WML compiler.
	
	* gw/msg.c, gw/wsp.c, gw/wtp.c: Dumping function only prints
	out the relevant parts of the structure, not all fields.
	
	* gw/anything-related-to-wapbox-wtp-or-wsp: Removed
	extra debugging stuff to make log files more readable even during
	debugging. (Put'em back if you need'em.)
	
	* gw/wapbox.c: Emptying the queue of message going to the bearer
	box is in its own thread.
	
	* gw/wsp.c, gw/wsp_events-decl.h, gw/wsp_state-decl.h: Implemented
	some more of the WSP. Now a Get PDU is parsed and a new thread
	is spawned to do the HTTP fetch (which at the moment just reads
	from a hardcoded file, but that's trivially fixable later). The
	thread then sends back a Reply PDU with the contents of the
	(compiled) WML page. However, the phone doesn't accept it yet,
	something strange is going on.
	
	* gwlib/octstr.[ch]: Wrote function octstr_read_file, which reads
	the contents of a file into an octet string.

1999-12-20    <rpr@rpr.wapit.com>

	* gwlib/socket.*: added function connect_to_server_with_port which
	binds our end of the socket to given port number.

	* gw/smsc_emi.c, gw/smsc.c: added 'our-port' configuration
	variable to the EMI IP code.

1999-20-12	Mikael Gueck <mikael.gueck@wapit.com>

	* gw/smsbox_req.c: Dropped in a replacement for split_send()
	still without the vital UDH part. Hopefully didn't miss any
	features.

Fri Dec 17 20:08:56 1999  Lars Wirzenius  <liw@wapit.com>

	* gw/wtp_state-decl.h: State RESULT_RESP_WAIT actually sends the
	TRResultConfirmation event to WSP.
	
	* gw/wsp_state-decl.h: State CONNECTING_2 implemented. This required
	rather a little work, since there is no action. :-)
	
	* gw/wsp_state-decl.h: State CONNECTED implemented, sort of. Well,
	not really. What happens is that the phone sends a Get PDU, and
	we receive it and unpack it in this state, do the http_get call,
	and dump with debug() the result to the log file. This is enough
	to make sure that the PDU is unpacked correctly and the protocol
	works well enough that the phone thinks the session is open and
	it can make S-MethodInvokes. Whee.
	
	The next step is to implement things correctly, so that events
	are handled while the URL fetch is happening, and so on.

	* gw/wsp.c: Fixed unpack_octstr (it used offset 0, instead of
	what it got as an argument). Changed wsp_dispatch_event so that
	it tries to find an existing, correct WSPMachine instead of always
	creating a new one. Made wsp_unpack_connect_pdu an internal
	function, since it's not going to be used from outside wsp.c.

Fri Dec 17 17:25:18 1999  Lars Wirzenius  <liw@wapit.com>

	* gw/wsp.c: use TID of the machine that receives the event,
	instead of generating a new one.

1999-16-12 Aarno Syvänen <syvanen@wapit.com>

	* wtp.c: Fixing still wtp_machine_find_create. Now it can handle many
	  events.

Wed Dec 15 18:43:27 1999  Lars Wirzenius  <liw@wapit.com>

	* gw/wapbox.c: Dump message to be sent to bearerbox, for debugging.
	
	* gw/wsp.c: Fixed generation of variable length integers for
	WSP PDU's.  Old code didn't even resemble correct working.
	
1999-14-12 Aarno Syvänen <syvanen@wapit.com>

	* wtp_send.c: in function wtp_pack_result, fix errors in packing wtp
	pdu fields.

Tue Dec 14 17:05:05 1999  Lars Wirzenius  <liw@wapit.com>

	* gw/wtp_send.c: Set destination address as the phone, not the
	gateway (and source address as the gateway, not the phone) when
	sending a message to the phone.

Tue Dec 14 16:34:39 1999  Lars Wirzenius  <liw@wapit.com>

	* gw/wsp.c, gw/wtp.c: Fixed calls to mytex_try_lock (which
	returns -1, not EBUSY, when the lock failed).

Mon Dec 13 20:47:28 1999  Lars Wirzenius  <liw@wapit.com>

	* gw/bb_msg.c, gw/bb_msg.h, gw/bearerbox.c, gw/smsbox.c,
	gw/smsc.c, gw/smsc_p.h, gw/wapbox.c, gw/wsp.c, gw/wsp.h,
	gw/wsp_machine-decl.h, gw/wtp.c, gw/wtp.h, gw/wtp_machine-decl.h,
	gwlib/thread.c, gwlib/thread.h: Replaced pthread_mutex_t with
	Mutex (defined in gwlib/thread.h), so that the evil kludge to work
	around pthread_mutex_trylock can be hidden inside gwlib/thread.c.
	This required touching lightly lots of code, but it should
	work now. Sorry if I broke anything.

Mon Dec 13 19:31:56 1999  Lars Wirzenius  <liw@wapit.com>

	* gw/wapbox.c, gw/wapbox.h (new file): Wrote functions for
	keeping a queue of messages to be sent to the bearer box.
	
	* gw/wtp_send.c: Made use of the message enqueueing function.

Mon Dec 13 18:43:54 1999  Lars Wirzenius  <liw@wapit.com>

	* gw/wsp.c: WSPMachine now remembers its own address and port as
	well as the client's; also added session_id field.
	
	* gw/wsp.c: Wrote code for creating WSP PDU's. Now creates a
	trivial ConnectionReply PDU.
	
	* gw/wsp_events-decl.h, gw/wsp_state-decl.h: Added field `machine'
	to SConnectResponse event to store the machine to which the
	SConnectResponse handler should send WTP requests. This is
	a kludge but it was (temporarily) easier to do than fixing
	wtp_find_or_create_machine.
	
	* gw/wsp_state-decl.h: Implemented most of SConnectResponse.
	
	* gw/wtp.c, gw/wtp.h: : Wrote function wtp_machine_create, which
	gets all relevant information via the argument list. This is
	mostly just reorganizing and renaming the internal name_machine
	function.  This involved changing wtp_machine_find_or_create
	as well.
	
	* gw/wtp.c: Removed locking of WTPMachine list, since it was
	incorrect and needs to be re-done in a different way. The current
	code has no locking, but at least it works if we're really,
	really careful.
	
	* gw/wtp_send.c: Commented away the calls to msg_destroy and
	octstr_destroy, since they caused segmentation faults (free
	called to often, or too early). This means yet another memory
	leak, but that's OK for now. We'll have to design a sensible
	way of dealing with memory de-allocation anyway.

Mon Dec 13 16:36:34 1999  Lars Wirzenius  <liw@wapit.com>

	* Makefile: test programs are also removed by "make clean".
	
	* gw/wapbox.c: Uses a log file (wapbox.log). Debug messages tweaked.
	
	* gw/wtp.c: Minor tweaking and bug fixing. Fixed wtp_next_tid:
	It shouldn't get the next or current tid as its argument,
	but use a static variable instead.  wtp_event_destroy is
	commented out to avoid problems with freeing things too early.
	wtp_event_dump output tweaked so it's clearer.	All debug messages
	say they come from WTP now; this helps reading long log files.
	WTPMachine.tcl is now set. Log file functions now don't get
	`errno' as their argument when it's not relevant (this cleans
	up log files quite a bit). New debugging message sprinkled
	all over the code. Added kludge to wtp_handle_event to avoid
	problem with pthread_mutex_trylock (see comment). Fixed problem
	wtp_handle_event so it uses machine->state and event->type
	(instead of separate variables that need to be kept up to date
	separately).
	
	* gw/wtp.h: Fixed prototype for wtp_tid_next.
	
	* gw/wtp_state-decl.h, state LISTEN: Actually sends the WSPEvent
	it generates to WSP, using wsp_dispatch_event (new function,
	see below).
	
	* gw/wtp_machine-decl.h: Added field `locker' as part of kludge
	for pthread_mutex_trylock.
	
	* gw/wsp.c: Lots of changes. Keeps list of WSPMachines (but
	doesn't use it yet). WSPEvent dumping improved. Wrote function
	wsp_dispatch_event to make it simpler for WTP to send events
	(current version doesn't yet try to find the correct WSPMachine,
	but always creates a new one). Lots of debugging messages
	sprinkled throughout the code. Added similar pthread_mutex_trylock
	kludge as for WTP in wsp_handle_event. Fixed bug in identifying
	the type of a WSP packet (got 0 and 1 wrong, stupid me).
	
	* gw/wsp.h: Added prototype for wsp_dispatch_event and missing
	#defines for WSPMachine definition.
	
	* gw/wsp_events-decl.h: Added event SConnectResponse.
	
	* gw/wsp_state-decl.h: NULL_STATE now implemented (only a lot of
	states more...).
	
	* gw/wsp_machine-decl.h: Added new fields for client address
	and port (for wsp_dispatch_event routing), locker (for kludge)
	and next (for keeping a list of WSPMachines).

	* gwlib/thread.c: Removed unnecessary empty lines from end.
	
1999-07-12 Aarno Syvänen <syvanen@wapit.com>

	* wtp.c: fixed locking bugs in functions wtp_machine_* 

	* wtp.c, wtp.h, wtp_state-decl.h: fixed wsp handle

	* changing debugging functions all the time

1999-03-12 Aarno Syvänen <syvanen@wapit.com>

	* gwlib/thread.c: added function mutex_destroy

	* wtp.c: Added (uncommented) list locks in functions wtp_machine_*. 
	Now these functions panic when mutexes are not iniatilized.

	* wtp.h: updated external function comments

1999-01-12 Aarno Syvänen <syvanen@wapit.com>

	* wtp.c: fixed a bug in wtp_machine_find (now it actually does find 
	a machine)

	* wtp.c: implemented wtp_tid_next and added global variable gen_tid
	(it is used as a transaction handle).

	* purely estetical changes everywhere (prettier comments, etc.)

1999-30-11 Aarno Syvänen <syvanen@wapit.com>

	* wtp_state-decl.h: added event receive abort pdu

Tue Nov 30 17:37:58 1999  Lars Wirzenius  <liw@wapit.com>

	* gw/wsp.c: Replaced call to malloc with call to gw_malloc.

Tue Nov 30 17:13:36 1999  Lars Wirzenius  <liw@wapit.com>

	* gw/wtp.c, gw/wtp.h, gw/wtp_machine-decl.h: Added event queues
	to WTPMachine and wtp_handle_event.

Tue Nov 30 16:33:29 1999  Lars Wirzenius  <liw@wapit.com>

	* gw/wsp.c, gw/wsp.h: Implemented wsp_handle_event (doesn't really
	work yet, needs wsp_state-decl.h first).
	
	* gwlib/thread.[ch]: Added mutex_try_lock.

Tue Nov 30 14:51:01 1999  Lars Wirzenius  <liw@wapit.com>

	* Makefile: fixed "make depend" to add the directory of the object
	file to the .depends file.

1999-11-30 Aarno Syvänen <syvanen@wapit.com>

	* wsp_events-decl.h: added fields for wsp pdu type and event handle 
	(unnecessary but mandatory). WSPEvent data structure represents both 
	WTP primitive and WSP event.

Mon Nov 29 19:33:42 1999  Lars Wirzenius  <liw@wapit.com>

	* gw/wtp.h: wtp_handle_event will call wsp_handle_event (not yet
	written) instead of returning the WSPEvent, changed the return type
	to void. Moved WTPTimer definition back to wtp_timer.h. Simplified
	code by only using the pthreads version places where there was a
	choice. Added wtp_machine_create and wtp_tid_next prototypes.
	
	* gw/wtp.c, gw/wtp_timer.h, gw/wapbox.c, gw/wtp_machine-decl.h:
	Related changes.
	
	* gw/wtp_send.c: Added static to local function.

	* gw/wsp_state-decl.h: Replaced pseudo code function with more
	detailed code to generate events for WTP.

1999-11-29    <rpr@rpr.wapit.com>

	* gw/smsbox_req.c: added that 'return' to smsbox request if
	max-messages was set to '0'

Mon Nov 29 17:17:44 1999  Lars Wirzenius  <liw@wapit.com>

	* gw/bearerbox.conf: Replaced interface-name's IP number with *,
	so that it works on other machines as well.
	
	* gw/wsp.c, gw/wsp.h, gw/wsp_machine-decl.h, gw/wsp_state-decl.h:
	Wrote.
	
	* gw/wtp.c, gw/wtp.h: Moved and renamed things for wsp stuff.
	
	* 

1999-11-29 Aarno Syvänen <syvanen@wapit.cm>

	*header files reorganized so that (most) types are defined in wtp.h

	*wtp_send.c: added a prototype result PDU packing function

1999-11-29    <rpr@rpr.wapit.com>

	* gwlib/octstr.c, gw/*box.c: modified octstr_recv to return 1 for
	data and 0 for EOF. Changed boxes accordingly 

1999-11-29    <rpr@rpr.wapit.com>

	* gwlib/*: renamed gwlog as log and separated socket functions to
	own module 'socket.c'. Renamed remaining wapitlib as 'utils'

	* */*.c, */*.h: removed last wapitlib.h references

1999-11-29    <rpr@rpr.wapit.com>

	* gw/smsbox_req.c: added sender username for sendsms request log
	output

	* gw/urltrans.c: fixed swapped receiver and sender

	* gwlib/*.*: split wapitlib into several parts, some splitting
	still possibly. All projects should work but those including 
	wapitlib.h should be converted to use gwlib.h instead

1999-11-26    <rpr@rpr.wapit.com>

	* gwlib/gwmem.*, gwlib/gwlib.h: Added new dynamic memory handling
	functions. All programs should be modified to use these. They
	simply PANIC if the allocation fails, so need to check their
	return value.

1999-11-26  Aarno Syvänen <syvanen@wapit.com>

	*wtp_state-decl.h: Added new rows in the state table (enough to run
	wtp proto). 

1999-11-25  Aarno Syvänen <syvanen@wapit.com>

	*wtp.c: Fixed another bug in the function handle_event. No it generates
	only one indication, even though it receives many invoke messages.

1999-11-25    <rpr@rpr.wapit.com>

	* gwlib/gwlib.h: added general gwlib header, which includes all
	parts of gwlib

	* */*.c: modified most of the modules to use new gwlib.h. Old ones
	still work

Thu Nov 25 15:49:13 1999  Lars Wirzenius  <liw@iki.fi>

	* gw/smsc_p.h: Added a missing include for signal.h to get the
	sig_atomic_t typedef.

1999-11-24    <rpr@rpr.wapit.com>

	* gw/smsc.c: delayed re-open calls, with panic-option

	* gw/bearerbox.c: added load of mutex lockings

	* gw/smsbox_req.c, gw/urltrans.*: added 'footer' and 'header'
	service configurations

	* utils/makedist: partial update

1999-11-24 Mikael Gueck <mikael@wapit.com>

	* gw/csdr.c, gw/boxc.c: Solaris compatibility hack, later
	  to wapitlib.c.

Wed Nov 24 13:31:44 1999  Lars Wirzenius  <liw@wapit.com>

	* Makefile, Rules.mk, doc/*/Makefile: Modifications so it works
	on Red Hat and gets timestamps OK.

Wed Nov 24 12:30:46 1999  Lars Wirzenius  <liw@wapit.com>

	* gw/wapbox.c: wapbox.conf renamed to wapbox.wapconf.

1999-11-23 Aarno Syvänen <syvanen@wapit.com>

	* header files: fixed few bugs in files wtp_machine-decl.h and 
	wtp_state-decl.h

	* wtp.c: fixed bugs in various functions

Tue Nov 23 12:07:03 1999  Lars Wirzenius  <liw@wapit.com>

	* Makefile: Added more stuff for docs.
	
	* Rules.mk, doc/*/Makefile: Moved common stuff to new Rules.mk,
	which is included by the individual makefiles.
	
	* doc/*/*.xml: Converted to use the SGML identifier of DocBook,
	instead of the XML one, because we have the SGML version of
	DocBook on Red Hat machines.

1999-11-22    <rpr@rpr.wapit.com>

	* gwlib/wapitlib.*: added function check_ip

	* gw/bearerbox.*, gw/boxc.*, gw/smsbox.*: added configuration
	strings allowed-hosts, denied-hosts, http-allowed-hosts and
	http-denied-hosts.

	* gw/bearerbox.c, gw/smsc.*: added 'bacup' default router to
	SMSCes, and set that non-answering SMSC gets back in line - in
	time.

	* gw/bb.h: changed default heartbeat-frequency to 30 seconds.
	
Mon Nov 22 11:37:39 1999  Lars Wirzenius  <liw@wapit.com>

	* doc/userguide: Wrote draft outline of user's guide.
	
	* Makefile: Added stuff for docs.

1999-11-19 Aarno Syvänen <syvanen@wapit.com>

	* header files: add header files for wsp events and wtp state machine

	* wtp.c: add wsp event manipulating  functions and a wtp state machine
	handling function

1999-11-19    <rpr@rpr.wapit.com>

	* gw/bearerbox.c: separated 'sendsms' to port of the internal SMS
	Box, if any. And fixed number normalization, it failed in some
	cases. (MG: does CIMD strip the first character in receiever number?) 
	
1999-11-19    <rpr@rpr.wapit.com>

	* gw/smsbox_req.c: returned info about new service starting, fixed
	some bugs

	* gw/bearerbox.c: fixed mutex deadlock in internal sms box and
	heartbeat bug in sms and wap boxes.

	* gw/boxc.c: commented ack/nack things out as they are not
	currently supported

1999-11-19    <rpr@rpr.wapit.com>

	* gw/smsc_*.*: removed last submit_smsmessage and
	receive_smsmessages. The EMI code still needs some fixing but
	should work now.

	* gw/bb_msg.*: removed client_data as it is not ever used.

	* gw/smsc.c, gw/bearerbox.c: fixed reconnecting procedures.

1999-11-19    <rpr@rpr.wapit.com>

	* gw/csdr.c, gw/csdr.h: modified to add 'routing_info' for
	received messages, and to save own IP and port when started. All
	other gethostyname-calls removed. Not tested, however.

1999-11-19    <rpr@rpr.wapit.com>

	* gw/smsbox_req.c, gw/smsbox_re.h, gw/smsbox.c: Did some bugfixing
	and updated header file comments (documentation) 

Fri Nov 19 11:13:17 1999  Lars Wirzenius  <liw@wapit.com>

	* gw/msg.c: msg_pack and msg_unpack handle NULL octstr-fields.

1999-11-19    <mikael@wapit.com>

	* gw/csdr.(c|h): added csdr_is_to_us to check whether a
	wdp_datagram should be routed through a specific CSDRouter.

1999-11-18    <rpr@rpr.wapit.com>

	* gw/bearerbox.c: added wdp_datagram routing functions, and means
	to get rid of old information and simple re-routing for messages
	after a wap box fails

	* gw/bb_msg.c, gw/bb_msg.h: added function rq_change_destination
	for wdp_datagram routing use

1999-11-18    <mikael@wapit.com>

	* gwlib/http.c, gw/smsbox_req.c: Content-Type fetching
	in http_get works, interface changed.

1999-11-18    <rpr@rpr.wapit.com>

	* gw/smsbox_req.c, gw/smsbox.c: Modified send_message to use
	octstrings instead of char *. UDH part not yet ready.

	* gwlib/octstr.c, gwlib/octstr.h: Added function octstr_truncate

Thu Nov 18 15:13:44 1999  Lars Wirzenius  <liw@wapit.com>

	* doc/arch/arch-smsbox.xml: Fixed DocBook syntax errors.
	
	* gw/msg.c, gw/msg.h, test/test_msg.c: Wrote function msg_duplicate.
	
	* Makefile: Fixed typo in libtest.a rule.

1999-11-17 Aarno Syvänen <syvanen@wapit.com>

	* wtp.c: some bug fixing in function wtp_unpack_wdp_datagram 

1999-11-17    <rpr@rpr.wapit.com>

	* wapitlib.c, wapitlib.h: added functions mutex_lock and
	mutex_unlock, which loack/unlock given mutex and panic if fail -
	as panic is acceptable as mutex fails only because of coding error
	(too early call or out-of-sequence call)

	* bearerbox.c, smsbox.c, bb_msg.c: modified to use new mutex_lock
	and unlock functions
	
1999-11-17    <rpr@rpr.wapit.com>

	* gw/bearerbox.c: fixed heartbeat bug

	* gw/smsbox.c: added debug information
	
1999-11-17    <rpr@rpr.wapit.com>

	* gwlib/wapitlib.c: catched signal interrupts in read

	* gw/bearerbox.c: internal sms box implemented. Still some
	problems when the system wents down

	* gw/boxc.c, gw/smsbox_rew.c: updates

	* gw/smsc_cimd.c: quick hack to connect CIMD 1.37. Partial. MG,
	fix this.

1999-11-17    <rpr@rpr.wapit.com>

	* smsbox_req.c: added username 'default', which is used, if no
	username is specified in 'sendsms' http-request

	* smsbox.smsconf: documentation updated accordingly

Tue Nov 16 17:32:34 1999  Lars Wirzenius  <liw@wapit.com>

	* gw/csdr.c: Fixed bug that prevented client address from being
	queryed. (Server address still isn't set correctly.)

1999-11-16    <rpr@rpr.wapit.com>

	* doc/arch/arch-bearerbox.xml: updated to reflect current version

Tue Nov 16 15:40:59 1999  Lars Wirzenius  <liw@wapit.com>

	* Makefile: Added compilation of test programs.
	
	* test/test_msg.c: Added a call to msg_dump.c.

Tue Nov 16 14:57:55 1999  Lars Wirzenius  <liw@wapit.com>

	* Moved a number of files from smsgateway here.

Tue Nov 16 13:11:13 1999  Lars Wirzenius  <liw@wapit.com>

	* Massive reorganization of the directory tree. Almost all files
	moved to subdirectories. Makefile somewhat rewritten.

1999-11-16    <rpr@rpr.wapit.com>

	* bearerbox.c, boxc.c, smsbox.c, smsbox_req.c, smsbox_rq.h,
	Makefile: Preparing bearerbox for internal SMS Box.

Tue Nov 16 12:21:41 1999  Lars Wirzenius  <liw@wapit.com>

	* Makefile, fakesmsc.c, http.c, wapitlib.h: Solaris support
	modified from patch by Steve Kennedy <steve-wapgateway@gbnet.net>.

1999-11-16    <rpr@rpr.wapit.com>

	* smsbox_req.c, smsbox_reg.h, smsbox.c, Makefile: separated 
	request handling to own module so that it can be used as thread 
	in bearerbox (implemented later)

	* bearerbox.c: someone has messed with print_threads

1999-11-15    <mikael@wapit.com>

	* smsc*.(c|h), *box.c: getting rid of the SMSMessage structure
	and pending_* plus adding better UDH support. However, I'm
	having second thoughts about having two sms types...

1999-11-15    <rpr@rpr.wapit.com>

	* bearerbox.c, control.html, bearerbox.conf: added new
	adminstration command 'disconnect'

	* boxc.c, boxc.h: added 'client_ip' information
	
1999-11-15    <rpr@rpr.wapit.com>

	* control.html: added simple control tool

	* bearerbox.c, bearerbox.conf, fake.conf: added simple
	HTTP-adminstration and watching routines

	* smsbox.c: updated comments
	
1999-11-15    <rpr@rpr.wapit.com>

	* bearerbox.c, boxc.c: Basic routing for WAP messages. Does not
	work with connectioned sessions, if there are more than one WAP
	BOX. Tough. Fixed later.

	* bb_msg.c, bb_msg.h: initiated better routing systems for
	WAP-messages, but implementation not ready
	
	* smsbox.c: file urltrans-request fixed.

1999-11-15 Mikael Gueck <mikael.gueck@wapit.com>

	* csdr.c: send and receive UDP datagrams.

	* smsc_smpp.c: 8bit receive related fixes.

1999-11-15    <rpr@rpr.wapit.com>

	* smsbox.smsconf, simple.smsconf: renamed previous smsbox.conf as
	.smsconf so that they are distinguished from bearerbox
	configuration

	* smsbox.c: fixing 'file' urltransh-requests. Still some bugs

	* bearerbox.c: WAP-packets are sent onward.. routing still missing

Mon Nov 15 12:04:37 1999  Lars Wirzenius  <liw@wapit.com>

	* wapbox.c, wapbox.conf: Wrote. This is the main module of
	the WAP box.
	
	* wapbox_feeder.c: Trivial test program for wapbox.c.
	
	* Makefile: related changes.
	
	* octstr.c: removed debugging message telling argument was NULL.
	Now a NULL argument is silently ignored.
	
	* msg.c: Added name of message type to message dump.

1999-11-12    <rpr@rpr.wapit.com>

	* bearerbox.c, boxc.c: ready for WAP invasion (ok, still missing
	routing functions and sending is currently set off)

Fri Nov 12 17:30:08 1999  Lars Wirzenius  <liw@wapit.com>

	* Makefile: added "make depend". This only works with GNU make,
	shame on me.

1999-11-12    <rpr@rpr.wapit.com>

	* html.c: modified html_strip_suffix_and_prefix to use
	str_case-str

	* urltrans.c, smsbox.c: fixed aliases

	* wapitlib.c, bearerbox.c: modified select to understand certain
	signals

Fri Nov 12 17:06:52 1999  Lars Wirzenius  <liw@wapit.com>

	* wapitlib.c and .h: Added str_case_str.

1999-11-12    <rpr@rpr.wapit.com>

	* smsc.h, smsc.c, bearerbox.c: added re-connecting functions to
	smsc_get_message, and changed interface a bit

	* smsbox.c, smsbox.conf: fixed multiple sms sending. Changed that
	when 'split-chars' are used, the splitting character is included
	in previous part, not the following one.
	
	* simple.conf: two sample sendsms users

1999-11-12    <rpr@rpr.wapit.com>

	* bb_msg.h, bb_msg.c: added functions _last_mod and
	_oldest_message for better queue control, and total number of
	added messages to queue length

	* bearerbox.c, boxc.c: some performance fixes
	
1999-11-12    <rpr@rpr.wapit.com>

	* Release-0.1: added file to list modifications to SMSGateway 0.6
	This is updated as the gateway is improved.	

	* octstr.c, octstr.h: added function octstr_replace, so that
	unnecessary destroy/create can be avoided

Fri Nov 12 02:00:00 1999  Mikael Gueck  <mikael.gueck@wapit.com>

	* http.(c|h), *box.c: httpserver_get_request now returns
	the client IP.

	* lots of other unspecified stuff

1999-11-11    <rpr@rpr.wapit.com>

	* octstr.c, octstr.h: added octstr_create_limited

	* many modules: changed bearerbox and smsbox to use Msg instead
	of SMSMessage. As these are not quite perfect currently, the
	system does not work well right now. Waiting for patches from
	other participants.

Thu Nov 11 19:41:40 1999  Lars Wirzenius  <liw@wapit.com>

	* msg.c: Fixed warning of unused variable and erroneous packing of
	of strings. Wrote msg_dump.

	* octstr.c: octstr_dump can be called with a NULl argument.

1999-11-11    <rpr@rpr.wapit.com>

	* msg.h, msg.c: added function msg_type.

	* octstr.h, octstr.c: functions octstr_duplicate, octstr_send ja
	octstr_recv added. 

	* unlimited number of improvements, bugfixing and enhancements in
	other modules. Too many.

1999-11-09    <rpr@rpr.wapit.com>

	* initial release. Copied several files from old smsgateway
	project, added new protypes and commented thigns out so that
	they cvan be compiled. This does NOT do anything, yet.

	* VERSION: version 0.1 set
