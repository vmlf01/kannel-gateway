2003-04-03  Stipe Tolj  <tolj@wapme-systems.de>
    * gwlib/http.[ch]: added http_get_header_parameter() function to return a
      specific parameter value for multi-parameter headers.
    * doc/userguide/userguide.xml: added section about new 'no-dlr' for CIMD2.
    * gwlib/cfg.def, gw/smsc/smsc_cimd2.c: added new 'no-dlr' config directive
      to indicate if DLR requests should be proceeeded for a CIMD2 connection.
      This *should* be abstracted for all SMSC types in the next future!
      Thanks to "Dziugas Baltrunas" <menulis@soften.ktu.lt> for the patch.
      [Msg-ID: <Pine.LNX.4.53L0.0304021137580.5595@diedas.soften.ktu.lt>]

2003-04-01  Alexander Malysh  <a.malysh@centrium.de>
    * configure.in, config.h.in, gwlib/protected.c: added check and using
      for reentrant functions (localtime_r,gmtime_r) in gw_localtime,gw_gmtime.
      In case of existing and using this functions, we avoid locking.

2003-03-31  Stipe Tolj  <tolj@wapme-systems.de>
    * gw/smsc/smsc_cimd2.c: re-patching Angel's fix from 2003-03-27.

2003-03-31  Stipe Tolj  <tolj@wapme-systems.de>
    * gwlib/http.c: fixing a serious bug in the HTTP client code causing 
      smsbox to crash if the connection is closed directly by the HTTP server.
      Thanks to "Michael Mulcahy" <michael.mulcahy@anam.com> for a fix!
      [Msg-ID: <000a01c2f555$6c920790$6100a8c0@synge.anam.com>]

2003-03-29  Stipe Tolj  <tolj@wapme-systems.de>
    * gw/smsc/smsc_emi2.c: fixed a typo for 'wait-ack-expire' handling.
      Thanks to Angel who reported this.

2003-03-28  Stipe Tolj  <tolj@wapme-systems.de>
    * gwlib/http.c: fixed a bug while HTTP redirecting (BUG#12). Also added
      HTTP response code 307 for redirection. Some source code formating.
      Thanks to Angel for reporting and providing a fix ;)
    * test/test_http.c: allow client to follow HTTP redirects.
    * test/test_http_server.c: added a special URI /redirect/ that can be
      used to test the redirection handling and reorganized the thread to
      be more clean.

2003-03-28  Stipe Tolj  <tolj@wapme-systems.de>
    * gw/wap_push_pap_compile.c: fixing a *possible* inconsistence with PAP
      and PPG specs. The constants "WAPPUSH" and "TYPE" should?! be in upper
      case as defined in specs. But the specs also use examples with lower 
      case, so we'll handle both for the sake of interopertibility with
      existing PI vendors. Thanks to "Ritesh Shah" <riteshs@rediff.co.in>
      for reporting this.
      [Msg-ID: <094b01c2f516$175e3210$6b0110ac@ritesh>]

2003-03-27  Alexander Malysh  <a.malysh@centrium.de>
    * gw/smsbox.c: added temporarily fix to smsbox that "handle" ack messages
      from bearerbox, so user will not be confused with warning about not
      handled messages.

2003-03-27  Stipe Tolj  <tolj@wapme-systems.de>
    * gwlib/log.c: fixing possible seg fault bug while re-opening "shared"
      log files. Thanks to Alexander for this patch.
      
2003-03-27  Stipe Tolj  <tolj@wapme-systems.de>
    * doc/userguide/userguide.xml: added CIMD2 specific documentation for 
      Angel's latest CIMD2 re-design patch.
    * gw/smsc/smsc_cimd2.c: Angel's fix for CPU load consume while idle and
      minor changes.
      [Msg-ID: <NCEOLLKPFAEAOBBMHNHEMELPFKAA.afradejas@mediafusion.es>]

2003-03-27  Stipe Tolj  <tolj@wapme-systems.de>
    * gw/smsc/smsc_at2.c: added an 'error' warning in case we can't decode 
      the PDU sequence. Thanks to "Bas A. Schulte" <bschulte@zeelandnet.nl>
      for giving us a hint here.

2003-03-27  Stipe Tolj  <tolj@wapme-systems.de>
    * gw/msg.h, gw/bb_boxc.c, gw/[bearer|sms|wap]box.c: added Alexander's 
      restarting patch to allow sending restart command within Kannel's 
      internal communication.
      [Msg-ID: <200303222057.12928.a.malysh@centrium.de>]

2003-03-25  Stipe Tolj  <tolj@wapme-systems.de>
    * gw/smscconn[.c|_p.h], gw/smsc/smsc[.c|_p.h]:
      this is a rewrite of the CIMD2 module to be addopted to the new
      SMSCConn API layer. Thanks to Angel for sending this patch.
    * gw/smsc/smsc_cimd2.c: Added additional support features:
      'our-host', 'our-port' and parameter 069 (service center address) have
      been added. Harmonzied log message formating.
      BEWARE: there are also COMPATIBILITY BREAKERS:
      Harmonized 'my-number' directive, this makes 'sender-prefix' absolete.
      Interpretation of 'keepalive' is now in seconds instead of minutes.
      [Msg-ID: <NCEOLLKPFAEAOBBMHNHEKEBBFKAA.afradejas@mediafusion.es>]

2003-03-25  Stipe Tolj  <tolj@wapme-systems.de>
    * Makefile.in: fixing Bruno's delete commit that caused config.sub and 
      config.guess to dissapear after a 'make distclean'. They are part of
      configure and have been produced while autoconf did all it's magic.
      Thanks to Alan for this hint.

2003-03-21  Stipe Tolj  <tolj@wapme-systems.de>
    * gw/smsc/smsc_emi2.c: fixed a re-connection bug cause by last commit.
      Thanks to Angel for this one.
      [Msg-ID: <NCEOLLKPFAEAOBBMHNHEEEAKFKAA.afradejas@mediafusion.es>]
    * utils/makedist: added creation of bzip2 tarball and md5 sums.

2003-03-21  Stipe Tolj  <tolj@wapme-systems.de>
    * gwlib/log.c: fixed a possible bug, when a logging file is opened twice.
      Now we search for the filename in the open table and simply pass the 
      file descriptor of that already opened log file to the new logger.
      Thanks to Alexander for this patch.

2003-03-20  Stipe Tolj  <tolj@wapme-systems.de>
    * gw/wap_push_ppg[_pushuser].c: fixed BUG#8. Reported by Bas A. Schulte.

2003-03-20  Stipe Tolj  <tolj@wapme-systems.de>
    * gw/wap_push_pap_compiler.c, wap/wap_events.def: fixed none accepted <pap>
      attribute 'product-name'. Thanks to "Bas A. Schulte" <bschulte@zeelandnet.nl>.
      [Msg-ID: <B647848F-5A5B-11D7-8DAC-000393059670@zeelandnet.nl>]
    * test/test_pap.c: added return code output in case pap_compile() fails.

2003-03-20  Stipe Tolj  <tolj@wapme-systems.de>
    * doc/userguide/userguide.xml: added 'reconnect-delay' to the higher
      smsc group abstraction documentation and deleted 'retry' from emi2
      and at2.

2003-03-20  Stipe Tolj  <tolj@wapme-systems.de>
    * gw/wap_push_ppg.c: fixed malformed xml reponses for the PAP document.
      Thanks to "Bas A. Schulte" <bschulte@zeelandnet.nl> for this patch.
      [Msg-ID: <98D28678-5A1E-11D7-8DAC-000393059670@zeelandnet.nl>]
    
2003-03-19  Stipe Tolj  <tolj@wapme-systems.de>
    * gw/smsc/smsc_smpp.c: moved 'reconnect-delay' also to the higher layer.

2003-03-19  Stipe Tolj  <tolj@wapme-systems.de>
    * gw/smsc/smsc_smpp.c: added UDH support for MOs. Thanks to 
      David White <David.White@one.at> for this patch.
      [Msg-ID: <3E770BA2.5030701@i-one.at>]
    * gw/smscconn[.c|_p.h]: moved smsc group config directive 'reconnect-delay'
      into higher abstraction layer to provide this for all SMSC modules. 
      Reconnect delay is defaulting to 10 sec.
    * gw/smsc/smsc_[at2|emi2|smasi].c: changed reconnecting behaviour to use
      value in the abstraction layer. Thanks to Angel for his patch here!
    * gwlib/cfg.def: removed no more needed 'retry' smsc group directive. This
      is now handled via the more abstracted 'reconnect-delay' value.

2003-03-19  Stipe Tolj  <tolj@wapme-systems.de>
    * gw/wml_compiler.c: fixed compiler warning.

2003-03-18  Stipe Tolj  <tolj@wapme-systems.de>
    * test/test_http_server.c: added a special URI /save which causes to save
      the received body of a POST request to a temporary /tmp/body.<pid>.<n> 
      file. This may be used for analyzing MMS related POST requests.

2003-03-17  Stipe Tolj  <tolj@wapme-systems.de>
    * gw/wap-error.[ch]: added error_converting() for reporting smart error
      messages if the converter failed, ie. libxml2 parser failed because of
      non-indicated encoding in the xml source.
    * gw/xml_shared.[ch]: added find_charset_encoding() to scan the xml preamble
      line, ie. <?xml version="1.0" encoding="iso-8859-1" ?> and extract a given
      charset encoding definition if available.
    * gwlib/octstr.h, gwlib/dbpool.c: cosmetic fixes
    * gw/wml_compiler.c: make wml_compile() more "inteligent" concerning the 
      encapsulated charset encoding in the xml source. This also fixes BUG#6.
      The problem was/is that the HTTP reponse header can deliver a charset
      definition and the xml preamble. So we cascade now as follows:
      If xml preample has an encoding specified, this overrides the HTTP reponse
      header, if not we take the HTTP reponse header if available. If both
      are not available, we assume UTF-8 as default encoding charset.
      The charset information is stored in the libxml2 document tree and re-used
      afterwards while text elements are parsed and transcoding to the targeted
      charset has to be done.
    * gw/wap-appl.c: added smart error messaging if converters failed while
      converting or compile a supported content-type, ie. a WML compilation
      failed.

2003-03-13  Stipe Tolj  <tolj@wapme-systems.de>
    * gw/smsc/smpp_pdu.c: Alexander's patch for fixing optional SMPP 3.4 
      parameter parsing. Thanks a lot.
      [Msg-ID: <200303121404.42328.a.malysh@centrium.de>]

2003-03-13  Stipe Tolj  <tolj@wapme-systems.de>
    * doc/userguide/userguide.xml: removed no-longer necessary 'force-sar'
      diretive, fixing BUG#7.

2003-03-11  Stipe Tolj  <tolj@wapme-systems.de>
    * gwlib/dbpool.[ch], test/test_dbpool.c: implements database connection
      pools for further use within Kannel. Currently MySQL is supported. More
      abstraction for various other DBMS is needed. 

2003-03-11  Stipe Tolj  <tolj@wapme-systems.de>
    * gw/bb_boxc.c, gw/bb_smscconn.c, gw/msg.h, gw/smsbox.c: added Alexander's
      ACK/NACK patch to provide smsbox connections with accurate ACK'ing data.
      [Msg-ID: <200303092018.30806.a.malysh@centrium.de>]
      We'll have to decide now on how to react on inbound ACK messages within
      smsbox.

2003-03-09  Stipe Tolj  <tolj@wapme-systems.de>
    * gw/bearerbox.c: while we receive SIGHUP we shouldn't re-load the store
      file, because we'd duplicate currently stored messages.
      Patch provided by Alexander.
    * contrib/kannel-monitor/index.php: some date calc fixed. Thanks to Alex.
    * gwlib/octstr[.ch|.debug]: added Alex's octstr_item_case_match() function.

2003-03-09  Stipe Tolj  <tolj@wapme-systems.de>
    * configure[.in], config.h.in, gw/bearerbox.c: added --disable-wap and 
      --disable-sms configure switches to disable parts in bearerbox.c.
      In an extended step these could be used to make a conditional compile
      process, where the whole WAP gateway libs don't need to be generated.
    * gwlib/conn.c, gw_bb_store.c: minor debug message beauty.
    * gwlib/http.c: opening an HTTP server should be 'info' log level.

2003-03-07  Stipe Tolj  <tolj@wapme-systems.de>
    * gwlib/http.c: fixed the previous kludge by a clean solution. We call
      parse_url() only once to populate the trans values. Added also dumping
      of the HTTP response. Can be turned of by switching of an #define.

2003-03-07  Bruno Rodrigues  <bruno.rodrigues@litux.org> 
    * Makefile.in: re-added make tests (closes: #3)
    * Makefile.in: clean automatic generated config.sub and config.guess in make
      distclean

2003-03-07  Stipe Tolj  <tolj@wapme-systems.de>
    * contrib/kannel-monitor/index.php: some minor changes contributed by
      Alexander.
    * gwlib/http.c: fixed (kludge?!) a HTTP basic auth problem with the passwd.
      Bruno substitues this with stars, I don't know why.

2003-03-06  Stipe Tolj  <tolj@wapme-systems.de>
    * contrib/kannel-monitor/*: a simple php application to summerize sms
      traffic accross several bearerbox instances, including automatic
      refresh and admin command support.

2003-03-06  Stipe Tolj  <tolj@wapme-systems.de>
    * gwlib/log.c: fixed compiler warning.
    * gw/smsc/smsc_smpp.c: fixed a charset encoding misbehaviour when msgs
      get split into multiple sms chunks. Now also the chunked, single msgs
      get passed to the charset encoding. 
      Thanks to "Benjamin Lee" <benjamin.lee@aspectdata.com> for this.

2003-03-05  Stipe Tolj  <tolj@wapme-systems.de>
    * gwlib/octstr.c[.debug], gwlib/log.c: fixed some compiler warnings.

2003-03-04  Stipe Tolj  <tolj@wapme-systems.de>
    * gw/smsc/smsc_smasi.c: some minor cosmetic changes.

2003-03-04  Stipe Tolj  <tolj@wapme-systems.de>
    * doc/userguide/userguide.xml: added smsc based logging directives
    * gw/wapbox.c, gw/smsbox.c, gw/bearerbox.c, test/drive_smpp.c,
      test/test_http_server.c, test/test_pap.c, test/wml_tester.c,
      gwlibs/utils.c: added the GW_NON_EXCL flag to the new log_open() call.
    * gw/smscconn.c, gw/smscconn_p.h, gwlib/cfg.def : added 'log-file' and 
      'log-level' as smsc global config directives.
    * gwlib/gwlib.c: gwlib_init() calls now log_init() too, in order to 
      initialize the index mapping array.
    * gwlib/log.[ch]: added smsc specific logging capability by handling 
      open log files in exclusive or non-explusive mode within the open log
      file array. Added log_thread_to() function to allow a working thread
      to register to a specific exlusive log file.
    * gw/smsc/smsc_[at2|cgw|emi2|fake|http|smasi|smpp|wrapper].c: added 
      register calls log_thread_to() within the working threads in case the
      smsc-id should be logged to a seperate, exlucive log-file.

2003-03-04  Stipe Tolj  <tolj@wapme-systems.de>
    * gw/smsc/smsc_smasi.c: fixed bugs in pdu_to_msg(), including the setting
      of 7bit coding to have normal text logged in access.log.
    * gw/bb_boxc.c: added missing smsbox-id output to XML tree of /status.xml.
    * gw/sms.c: fixed alt_dcs re-coding misbehaviour. Reported by Alexander.
    * gwlib/conn.c: cosmetic changes

2003-03-04  Stipe Tolj  <tolj@wapme-systems.de>
    * gwlib/octstr.[ch|debug]: added some more functions provided by Nisan.
      [Msg-ID: <5.1.0.14.0.20030304085848.026b6020@amagoblin.ialien.co.za>]
    * gwlib/conn.[ch], gwlib/http.c: fixed a serious pthread_mutex bug for 
      the call-back function to the openssl thread locking. We used two
      seperate lock array, one for the client and one for the server side.
      But openssl does not know about those, and you can't register two
      different call-backs for client/server side. This should make now
      a lot of ssl related things more cleaner.

2003-02-28  Stipe Tolj  <tolj@wapme-systems.de>
    * gwlib/log.c: fixed minor problems from last commit. Thanks to Angel.

2003-02-27  Stipe Tolj  <tolj@wapme-systems.de>
    * doc/userguide/userguide.xml: move 'our-host' from SMSC specific config 
      sections to global SMSC section and added HTTP admin command 'loglevel'.
    * gwlib/log.[ch], gw/bb_http.c: added HTTP admin command 'loglevel' to 
      change log-level of log-files while bearerbox is running.
      Patched submited by Angel. Slightly modified by me.
      [Msg-ID: <NCEOLLKPFAEAOBBMHNHEIEIFFGAA.afradejas@mediafusion.es>]

2003-02-27  Stipe Tolj  <tolj@wapme-systems.de>
    * gw/smsc/smsc_smpp.c: adding handling of invaid userid and/or passwd to 
      shutdown SMSC connection rather then retrying to reconnect.
      Thanks to Alexander for this patch.
      [Msg-ID: <200302271127.55572.a.malysh@centrium.de>]

2003-02-27  Stipe Tolj  <tolj@wapme-systems.de>
    * configure[.in]: added checking of --[enable|disable]-docs switch.
      Thanks to Alan for the reminder and the patch.
    * gw/smscconn_p.h, gw/smscconn.c, gw/smsc_[smpp|smasi|http|fake|emi2|cgw].c:
      Added 'our-host' interface support for binding to an explicite interface
      on SMSC connections. Patch provided by Angel.
      [Msg-ID: <NCEOLLKPFAEAOBBMHNHEKEGOFGAA.afradejas@mediafusion.es>]
    * gw/dlr.c: memory leak fix. Thanks to Alexander for pointing to this.

2003-02-24  Stipe Tolj  <tolj@wapme-systems.de>
    * doc/userguide/userguide.xml: entry about 'restart' command
    * gw/bearerbox.c, gw/bb_boxc.c, gw/bb_http.c: admin HTTP command 'restart' added
      to restart bearerbox. Patch by Alexander.
      [Msg-ID: <200302222202.55347.a.malysh@centrium.de>]

2003-02-23  Stipe Tolj  <tolj@wapme-systems.de>
    * gw/smsc/smsc_smpp.c: fixed a mistakely deleted increament of msg_id_counter
      in smpp_create() for sequence_numbers starting 0x0000001.

2003-02-21  David Holland  <david.holland@3glab.com>
    * gw/smsc/smpp_pdu.def: fixed generic_nack definition (thanks to
      Alexander Malysh)

2003-02-18  David Holland  <david.holland@3glab.com>
    * gw/smsc/smsc_smpp.c, gwlib/cfg.def, doc/userguide/userguide.xml:
      added facility to specify SMPP SMSC service type with
      'service-type = "foo"' syntax (thanks to Nick Clarey)

2003-02-18  Stipe Tolj  <tolj@wapme-systems.de>
    * gw/smsc/smsc_smasi.c: fixed typo bug in reading the TON and NPI config
      directives for the SM/ASI module.

2003-02-17  Stipe Tolj  <tolj@wapme-systems.de>
    * Making development release 1.3.1.

