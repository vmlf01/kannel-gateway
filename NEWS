NEWS about Kannel: Open Source WAP and SMS Gateway version 1.1.4

This is a DEVELOPMENT version. It should be usable for experimentation
and testing, and is a release candidate for 1.2. Please do try it out
and report problems to devel@kannel.org (the development mailing list)
or bugs@kannel.org (the bug tracking system).

NOTE: This is not an update to 1.0.  Updates to 1.0 will be numbered 1.0.x,
until we decide to release 1.2.  See the VERSION file for details.

Changes since version 1.1.4:

Compatibility breakers:

 * sendsms service now uses the HTTP status code in replies, instead of
   always using 200.  Valid requests get 202 (Accepted), invalid requests
   get an error code.

New features:

 * fakewap is better at testing high loads.

 * Added sender-prefix configuration variable for CIMD2.

 * A new sms-service escape sequence, %i, which expands to the smsc-id
   of the message.

 * Added a status.xml service to the administration interface.

Bugfixes:

 * Minor bugfix to emi2.

 * Fixed handling of accept-x-kannel-headers and assume-plain-text
   configuration fields.

 * Phone-as-SMSC driver can handle text messages with UDH.

 * Fixed a rare case that could cause a deadlock between the bearerbox
   and smsbox.

 * Fixed a bug that prevented having many smsc configuration blocks.

 * HTTP: Correctly handle redirections to invalid URLs.

 * Don't panic if there is no "default" sms-service.

Development news:

 * Beginnings of https support.  Not secure yet.


Changes since version 1.1.3:

Security:

 * smsbox: X-Kannel-UDH headers in HTTP responses are no longer accepted,
   unless accept-x-kannel-headers is configured for the service.  This
   prevents possibly untrusted sites from setting strange UDH values.

 * Bugfix: An empty POST request from a client could crash the wapbox.

Compatibility breakers:

 * smsbox: HTTP responses with content-type application/octet-stream (or
   no content-type at all) will be sent as "octet data" instead of assumed
   to be text/plain.  This makes it possible to send for example ring tones
   in response to user messages.

 * smsbox: The "user" field is now required in all sendsms services.

 * Kannel now uses the same "data coding scheme" values in all SMSC
   protocols that use them.  It is now used only to set the alphabet,
   and leaves the message class alone.  This affects the Phone-as-SMSC,
   CIMD2, OIS, and SMPP modules.

 * Compiling Kannel now requires libxml 2.2.5 or later.

New features:

 * New sms-service type "posturl", which makes a POST request
   containing the message in the body and other information in X-Kannel-
   headers.  The sendsms interface also accepts POST requests in this format.
   Not documented yet.

 * Sendsms services also accept POST requests.

 * smsbox: X-Kannel-From and X-Kannel-To headers can be used in HTTP
   responses to set the sender and receiver numbers, if
   accept-x-kannel-headers is configured for the service.

 * New, improved module for UCP/EMI SMSC protocol, called "emi2".
   It will replace the emi and emi_ip modules in the future, but coexists
   with them in this release.

 * New configuration variable catch-all in sms-service configuration
   groups.  If this is set, the service will be used for all messages
   that match its keyword, instead of only messages that have the right
   number of words.  Useful for defining service-specific error replies.

 * Configuration variables such as "concatenation" can now be set to
   yes/no or true/false instead of just 0 or 1.

 * Kannel can be configured to store incoming SMS messages in a file
   until they have been processed, so that they can not be lost in a crash.

 * Improved portability to MacOS X.

 * SMPP SMSC module will send enquire_link packets at regular intervals.
   This is needed to stay connected with some SMSCs.

 * Significant improvements to the SMPP SMSC module.  It should now be
   ready for serious use.

 * Phone-as-SMSC module will retry a few times if sending a message fails.
   This works around many temporary problems.

Bugfixes:

 * Support libxml versions that install xml2-config instead of xml-config.

 * Several memory leaks fixed.

 * Fixed panic if faked-sender configuration variable is used in a sendsms
   service.

 * Sendsms replies now have no-cache headers to prevent proxies from
   trying to cache sendsms queries.

 * Some PDU encoding errors in the Phone-as-SMSC module were fixed.

 * CIMD2 SMSC module works around a bug in some SMSCs that could cause
   messages to be received multiple times.

 * HTTP module can (again) handle "100 Continue" responses from servers.

 * Lots of minor bugfixes.

Development news:

 * More work on WAP Push.

Known problems:

 * New POST-based interface for SMS is not documented.

 * The CIMD2 SMSC module can sometimes send multiple "alive" requests
   at a time, which breaks the protocol and confuses the SMSC.

 * Concatenated text messages don't work with all protocols.


Changes since version 1.1.2:


Security:

 * A bug in the error handling code would make Kannel crash if a HTTP
   request (for example to sendsms) contained literal spaces in the URL.
   This has been fixed.  The problem was not present in the 1.0 series.

New features:

 * New "http" SMSC which allows Kannel to be used with HTTP-based
   SMS interfaces (such as Kannel itself, so that you can chain them).

 * WML compiler produces slightly smaller output.

Bugfixes:

 * Phone-as-SMSC module made more reliable under high load.  In particular,
   reopening a broken connection works again.

 * Bearerbox no longer treats any UDP errors as fatal, they are just
   warnings now.

 * Several memory leaks fixed.

Development news:

 * Started a benchmarking framework, activated with "make bench".

 * Bearerbox now uses the conn module for box connections.

 * octstr_format takes a new %E format which does http-url encoding.


Changes since version 1.1.1:

Compatibility breakers:

 * Format of access log output has changed.

New features:

 * Support for Ericsson GSM modems.

 * smsbox: HTTP responses can now send UDH messages by sending an
   X-Kannel_UDH header in the reply.

 * smsbox: Added "%b" translation for receiving binary data.

 * Updated and expanded User's Guide.

 * SMPP driver now responds to Enquire Link packets, which will help
   keep Kannel connected to an SMS center when the connection is idle.

 * Small perl script to read and summarize access log output.

 * wapbox is better at dealing with HTTP responses that are too large
   for the client, or in the wrong format.

Bugfixes:

 * WMLScript compiler avoids generating zero-length functions, so that
   the result works on more clients.

 * smsbox: Numerous fixes to the message splitting functions.

 * smsbox: OTA configuration works again.

 * WML compiler: Corrected encodings for "ordered true" and "ordered false".

Development news:

 * WML decompiler improved.


Changes since version 1.1:


Compatibility breakers:

 * Kannel now complains about unknown configuration settings, rather than
   silently ignoring them.


New features:

 * The SMS testing tool (fakesmsc) has been replaced with a better one.
   It can be started and stopped while Kannel is running, which makes
   it easier to use.  It also supports udh.

 * validityperiod option for phone-as-SMSC, see usersguide for details.

 * User's Guide has section on how to use pre-compiled Kannel packages.

 * Improved portability to FreeBSD.

 * Updated CIMD2 code to version "2-0 en" of the specification.


Bugfixes:

 * http-proxy-exceptions works again.

 * SMS service keywords are case-insensitive again.

 * If SMS request has unknown keyword, and no default is specified,
   reply "Request failed" instead of logging a confusing error message.

 * Fixed possible deadlock in bearerbox startup.

 * Fixed a number of memory leaks.

 * Fixed some errors that only showed up with --with-malloc=native.


Development news:

 * All boxes now use the new configuration file interface.


Changes since version 0.13.1:


Compatibility breakers:

 * Replies from the bearerbox admin interface are now formatted according
   to the Accept: headers sent by the client, preferring WML over HTML
   over plain text.  They used to always be plain text.

 * Filling in admin-password is now mandatory in the configuration file.

 * In the configuration for UCP/EMI SMSCs, username and password are
   now used if they are set, and not used if they are not.
   They used to be mandatory even though they were never used, so in
   existing configurations they are likely to contain dummy values
   that will not work.  (This was actually changed before 0.13.1, we
   forgot to note it then.)


New features:

 * New SMPP module.  Written for SMPP 3.4 but should support 3.3 as well.

 * smsbox reports load to the bearerbox.

 * Added status.wml, status.html, and status.txt commands to the bearerbox
   admin interface, to return status in a specific format.

 * If admin commands are tried with the wrong password, the response is
   delayed, in order to limit brute force password cracking.

 * New configuration variable status-password, which protects the status
   admin command if it is set.

 * Admin commands can be used without a /cgi-bin part in the URL.
   So http://localhost:13000/cgi-bin/status can now become just
   http://localhost:13000/status.

 * New smsc configuration group variable 'allowed-smsc-id', which lets
   you limit which messages can be sent to a specific SMSC.

 * New architecture documentation.

 * New SMS testing tool called fake2.  It works like the old fakesmsc,
   but can be started and stopped while Kannel is running, which makes
   it easier to use.

 * New URL translation %k in smsbox, which is replaced with the keyword
   of the SMS request.

 * Improved portability to FreeBSD by using less stack space per thread.


Bugfixes:

 * The u-dieresis (u with two dots) was translated incorrectly to the
   GSM character set, in the AT, CIMD2, and SMPP drivers.  Fixed.

 * The EMI used to crash if username was not set.  Fixed.

 * WML compiler can handle a libxml that was compiled with
   the -DXML_USE_BUFFER_CONTENT flag.

 * WML compiler: If charset is not supplied in a WML file, the
   one from the HTTP content-type header is used instead, if available.

 * Fixed signal handling on Solaris and other systems with POSIX threads.


Development news:

 * New SMSC interface in the bearerbox, which should allow much faster
   implementations and better error handling.  There is a wrapper for
   the old interface, because no SMSC drivers have been converted yet.

 * New configuration file interface that uses Octstrs.

 * Work started on WAP Push.


Changes since version 0.13:


New features:

 * WTP and WSP protocol stacks are now separate, so that other projects
   than Kannel can make use of them.

 * Redesigned smsbox to have a stable number of threads.  It is much
   more stable now, handles more requests at a time, and shuts down
   more cleanly.

 * sendota interface accepts more than one OTA configuration.

 * Driver for UCP/EMI SMSCs supports authenticated sessions.

 * smsbox accepts WML responses as well as plain text and HTML responses.


Bugfixes:

 * Improved HTTP module's support for HTTP/1.0 clients and servers.

 * Fixed UDH encoding in Phone-as-SMSC module.

 * Fixed splitting of SMS messages that have UDH.

 * HTML to SMS conversion now deals with entities like &#1234; correctly.
   (Also fixed in 0.12.3)

 * Several bugs and memory leaks fixed in SMPP module.

 * Bearerbox detection of inactive SMSCs is less trigger-happy.
   This greatly improves throughput if the roundtrip to the SMSC is
   slower than 10 milliseconds.  (Also fixed in 0.12.3)

 * Detect libxml 2.2.10 and above as part of the 2.2.x series.
   (Also fixed in 0.12.3)

 * Fixed some memory leaks.


Development news:

 * Checking malloc now displays some of the contents of the memory leaks
   it finds, which makes it much easier to track them down.

 * Started building support for WAP Push.


Changes compared to version 0.12.3:


New features:

 * HTTP module restructured to use a fixed number of threads.  This makes
   it able to handle many more requests at a time.

 * Kannel boxes report version numbers of themselves and their components
   (such as libxml) when starting up.

 * Support for proxies that require basic authorization.

 * Bearerbox "status" command reports lengths of internal queues.

 * Phone-as-SMSC module now also supports Falcom A2D modem and Nokia 7110.

 * Added configure option --with-defaults=speed for production systems.

 * Updated documentation.

 * Bearerbox starts up faster.

 * sendsms interface can handle multiple requests over one HTTP/1.1
   connection.

 * Improved portability to HP/UX, FreeBSD and Cygwin, possibly others.

 * Support magic URL "kannel:alive", to check if the gateway is still running.

 * Support for PAM authentication of sendsms interface.

 * Sendsms interface checks that UDH messages have a correct length indicator.


Bugfixes:

 * Fixed several bugs in Phone-as-SMSC module.

 * Fixed the problem that switching malloc wrappers required a "make clean"
   when recompiling.


Development news:

 * Many files have been reformatted to our new coding style.

 * Renamed Msg type smart_sms to just sms.

 * New Dict module in gwlib, for Octstr -> value hash tables.

 * New FDSet module in gwlib, for efficient polling of large sets of
   file descriptors.  Used by HTTP module.  Connection module has
   extensions for it.


See ChangeLog for detailed information.
